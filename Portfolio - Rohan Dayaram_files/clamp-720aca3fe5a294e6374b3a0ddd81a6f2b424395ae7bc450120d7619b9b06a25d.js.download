/*!
* Clamp.js 0.5.1
*
* Copyright 2011-2013, Joseph Schmitt http://joe.sh
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
!function(){function e(e,t){function n(e,t){return s.getComputedStyle||(s.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),s.getComputedStyle(e,null).getPropertyValue(t)}function i(t){var n=t||e.clientHeight,i=a(e);return Math.max(Math.floor(n/i),0)}function l(t){return a(e)*t}function a(e){var t=n(e,"line-height");return"normal"==t&&(t=1.2*parseInt(n(e,"font-size"))),parseInt(t)}function r(t){return t.lastChild.children&&t.lastChild.children.length>0?r(Array.prototype.slice.call(t.children).pop()):t.lastChild&&t.lastChild.nodeValue&&""!=t.lastChild.nodeValue&&t.lastChild.nodeValue!=p.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),r(e))}function u(t,n){function i(){H=p.splitOnChars.slice(0),L=H[0],g=null,y=null}if(n){var l=t.nodeValue.replace(p.truncationChar,"");if(g||(L=H.length>0?H.shift():"",g=l.split(L)),g.length>1?(y=g.pop(),o(t,g.join(L))):g=null,c&&(t.nodeValue=t.nodeValue.replace(p.truncationChar,""),e.innerHTML=t.nodeValue+" "+c.innerHTML+p.truncationChar),g){if(e.clientHeight<=n){if(!(H.length>=0&&""!=L))return e.innerHTML;o(t,g.join(L)+L+y),g=null}}else""==L&&(o(t,""),t=r(e),i());if(!p.animate)return u(t,n);setTimeout(function(){u(t,n)},!0===p.animate?10:p.animate)}}function o(e,t){e.nodeValue=t+p.truncationChar}t=t||{};var c,s=window,p={clamp:t.clamp||2,useNativeClamp:"undefined"==typeof t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","\u2013","\u2014"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"\u2026",truncationHTML:t.truncationHTML},h=e.style,d=e.innerHTML,f="undefined"!=typeof e.style.webkitLineClamp,C=p.clamp,m=C.indexOf&&(C.indexOf("px")>-1||C.indexOf("em")>-1);p.truncationHTML&&((c=document.createElement("span")).innerHTML=p.truncationHTML);var g,y,v,H=p.splitOnChars.slice(0),L=H[0];if("auto"==C?C=i():m&&(C=i(parseInt(C))),f&&p.useNativeClamp)h.overflow="hidden",h.textOverflow="ellipsis",h.webkitBoxOrient="vertical",h.display="-webkit-box",h.webkitLineClamp=C,m&&(h.height=p.clamp+"px");else{var M=l(C);M<=e.clientHeight&&(v=u(r(e),M))}return{original:d,clamped:v}}window.$clamp=e}();